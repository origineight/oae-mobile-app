<ion-header-bar class="bar-subheader">
  <h2 class="title">{{user.email}}</h2>
</ion-header-bar>

<ion-view view-title="Results">
  <ion-content>
    <div class="list card">
      <div class="item item-divider"><i class="icon ion-ios-pulse-strong positive"></i> Statistics</div>
      <div class="item item-body">
        <p>You have previously taken this test for <strong>{{user.numTestsTaken}}</strong> <ng-pluralize count="user.numTestsTaken"
          when="{'0': ' times',
                 'one': ' time',
                 'other': ' times'}">
        </ng-pluralize>.</p>
      </div>
    </div>

    <div class="padding">
      <canvas id="line" class="chart chart-line" data="data"
        labels="labels" legend="true" series="series">
      </canvas>
    </div>

    <ion-list>
      <div class="item item-divider">
        Test Details
        <div class="pagination float-right" ng-hide="results.length <= pageSize">
          <button class="button-clear icon ion-chevron-left" ng-disabled="currentPage == 0" ng-click="prevPage()"></button>
            {{currentPage+1}}/{{numPages()}}
          <button class="button-clear icon ion-chevron-right" ng-disabled="currentPage >= numPages()-1" ng-click="nextPage()"></button>
        </div>
      </div>
      <ion-item class="item-result item-icon-right item-text-wrap" ng-repeat="result in results | startFrom:currentPage*pageSize | limitTo:pageSize track by result.id" href="#/tab/results/{{result.id}}">
        <span class="counter">#{{result.id}}</span>
        <span class="test-date">{{result.date | date : 'mediumDate'}}</span>
        <span class="result-count"><strong>{{result.ideas.length}}</strong><ng-pluralize count="result.ideas.length"
          when="{'0': ' ideas',
                 'one': ' idea',
                 'other': ' ideas'}">
        </ng-pluralize></span>

        <span class="result-percentile" ng-hide="result.ideas.length == 0">> {{ resultPercentile(result.ideas.length) }}%</span>
        <i class="icon ion-chevron-right icon-accessory"></i>
      </ion-item>
    </ion-list>
  </ion-content>

  <ion-nav-buttons side="right">
    <a class="button button-dark button-clear ion-android-delete" ng-click="resetResults()"></a>
  </ion-nav-buttons>

</ion-view>
